<?phpnamespace App\Http\Controllers\API\Admin;use App\Http\Controllers\Controller;use App\Http\Resources\UsersResource;use App\Models\User;use Illuminate\Http\Request;use Illuminate\Support\Facades\Auth;use Illuminate\Validation\Rules\Password;class AuthController extends Controller{    public function register(Request $request)    {        $data = $request->validate([            'name' => 'required|string',//            'user_status'=>'required',            'phone'=>'string',            'email' => 'required|email|string|unique:users,email',            'password' => [                'required',                'confirmed',                Password::min(8)->mixedCase()->numbers()->symbols()            ]        ]);        /** @var \App\Models\User $user */        $user = User::create([            'user_status'=>1,            'name' => $data['name'],            'email' => $data['email'],            'phone'=> $data['phone'],            'password' => bcrypt($data['password'])        ]);        $token = $user->createToken('main')->plainTextToken;        return response([            'user' => $user,            'token' => $token        ]);    }    /**     * @param Request $request     * @return \Illuminate\Contracts\Foundation\Application|\Illuminate\Contracts\Routing\ResponseFactory|\Illuminate\Http\Response     */    public function login(Request $request)    {        $credentials = $request->validate([            'email' => 'required|email|string|exists:users,email',            'password' => [                'required',            ],            'remember' => 'boolean'        ]);        $remember = $credentials['remember'] ?? false;        unset($credentials['remember']);        if (!Auth::attempt($credentials, $remember)) {            return response([                'error' => 'The Provided credentials are not correct'            ], 422);        }        $user = Auth::user();        $token = $user->createToken('main')->plainTextToken;        return response([            'user' => $user,            'token' => $token        ]);    }    /**     * @return \Illuminate\Contracts\Foundation\Application|\Illuminate\Contracts\Routing\ResponseFactory|\Illuminate\Http\Response     */    public function logout()    {        /** @var User $user */        $user = Auth::user();        // Revoke the token that was used to authenticate the current request...        $user->currentAccessToken()->delete();        return response([            'success' => true        ]);    }    /**     * @param Request $request     * @return UsersResource     */    public function getUsers(Request $request){        if($request->keyword){            $user = User::where('name', 'like', '%' . $request->keyword . '%')->orderBy('id','DESC')->with('role');        }else{            $user = User::orderBy('id','DESC')->with('role');        }        if ($request->status) {            $user->where('user_status', $request->status);        }        return new UsersResource($user->paginate(10));    }    /**     * @param $id     * @return \Illuminate\Http\JsonResponse     */    public function updateUser(Request $request,$id){        $data = $request->validate([            'name' => 'required|string',            'phone'=>'numeric',            'email' => 'required|email|string',        ]);        $updateUser = User::where('id',$id)->update($data);        return response()->json($updateUser);    }    /**     * @param $id     * @return \Illuminate\Http\JsonResponse     */    public function deleteUser($id){        $userDestroy = User::destroy($id);        return response()->json($userDestroy);    }}